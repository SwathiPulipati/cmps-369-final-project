extends layout.pug 

block content 
    #contact-list
        .row.mt-4
            .col-.col-md-8
                h1 Contact List 
            .col-.col-md-4.d-inline-flex.justify-content-start.justify-content-md-end
                a(href='/create').btn.btn-outline-primary.align-self-center Create a new contact
        .list-group.my-2
            .list-group-item.my-2(v-for='c in contacts')
                .row.my-1
                    .col-.col-lg-2
                        a(:href="'/'+c.id") {{c.article}} {{c.first_name}} {{c.last_name}}
                    .col-.col-lg-2.mt-2.mt-lg-0
                        span {{c.phone}}
                    .col-.col-lg-3
                        span {{c.email}}
                    .col-.col-lg-3.my-2.my-lg-0
                        span {{c.address}}
                    .col-.col-lg-2.my-2.my-lg-0
                        section
                            input(id="'phone'+c.id", type='checkbox', disabled, :checked = "c.contact_by_phone")
                            label(for="phone").mx-2 Phone
                        section
                            input(id="'email'+c.id", type='checkbox', disabled, :checked = "c.contact_by_email")
                            label(for="email").mx-2 Email
                        section
                            input(id="'mail'+c.id", type='checkbox', disabled, :checked = "c.contact_by_mail")
                            label(for="mail").mx-2 Mail
                    
    script. 
        Vue.createApp({
            data: function() {
                return {
                    contacts: [],    
                }
            },
            mounted: function() {
                this.init();
            },
            methods: {
                async init(){
                    const response = await axios.get('/contacts');
                    this.contacts = response.data.contacts;
                }
            }
        }).mount('#contact-list')